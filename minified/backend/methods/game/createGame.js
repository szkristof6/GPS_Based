const bcrypt=require("bcrypt"),{nanoid:nanoid}=require("nanoid"),{gamesSchema:gamesSchema}=require("../../schemas/game"),games=require("../../db/games");async function createGame(e,a){try{await gamesSchema.validate(e.body);const s=5,t=await bcrypt.genSalt(s).then((a=>bcrypt.hash(e.body.password,a))),n=await games.insert({id:nanoid(15),name:e.body.name,password:t,gamemode:"test",location:e.body.location,date:e.body.date,joinable:!1,objects:{}});return void a.send({status:"success",game:n})}catch(e){return e.message.startsWith("E11000")&&(e.message="This gas has already been created!"),void a.send(e)}}module.exports=createGame;